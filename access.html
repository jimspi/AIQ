<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Personalized AI Learning Plan</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(to right, #ffffff, #e0f7ff);
      color: #1a1a1a;
      padding: 4em;
      text-align: center;
    }
    .container {
      max-width: 720px;
      margin: auto;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.06);
      padding: 3em;
    }
    h1 {
      font-size: 2em;
      font-weight: 800;
      color: #003366;
      margin-bottom: 0.25em;
    }
    p {
      font-size: 1.1em;
      color: #333;
      margin-bottom: 1.5em;
    }
    .recommendation {
      background-color: #f0f8ff;
      border-left: 5px solid #007BFF;
      padding: 1em;
      margin-bottom: 1.5em;
      text-align: left;
      border-radius: 12px;
    }
    .recommendation h3 {
      margin-top: 0;
      color: #0056b3;
    }
    .cta {
      display: inline-block;
      background-color: #007BFF;
      color: #fff;
      padding: 0.75em 2em;
      font-size: 1em;
      font-weight: 600;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      text-decoration: none;
    }
    .cta:hover {
      background-color: #005bb5;
    }
    .flashcard {
      background: #eef6ff;
      border-radius: 12px;
      margin: 1em 0;
      padding: 1em;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .flashcard:hover {
      transform: scale(1.02);
    }
    .flashcard .question { font-weight: 600; color: #0056b3; }
    .flashcard .answer { display: none; margin-top: 0.5em; color: #333; }
    .flashcard.flipped .answer { display: block; }
    .copy-button, .send-button {
      background-color: #007BFF;
      color: white;
      padding: 0.5em 1em;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 1em 0.5em;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>You're In. Let's Level Up.</h1>
    <p>Based on your AIQ score, hereâ€™s your personalized learning path:</p>

    <div id="dynamicContent">
      <p>Loading your learning plan...</p>
    </div>

    <div id="flashcards"></div>
    <button class="copy-button" onclick="copyFlashcards()">Copy Quiz</button>
    <button class="send-button" onclick="alert('Send feature coming soon')">Send Quiz</button>

    <a class="cta" href="/">Return Home</a>
  </div>

  <script>
    const score = parseInt(localStorage.getItem('aiScore') || '0');
    const tier = localStorage.getItem('aiTier') || 'Unknown';
    const tools = JSON.parse(localStorage.getItem('aiTools') || '[]');
    const answers = JSON.parse(localStorage.getItem('aiAnswers') || '[]');
    const projects = localStorage.getItem('aiProjects') || '';

    async function fetchRecommendations() {
      const res = await fetch('/api/recommend', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ score, tier, tools, answers, projects })
      });
      const data = await res.json();
      document.getElementById('dynamicContent').innerHTML = data.html;
    }

    async function fetchFlashcards() {
      const res = await fetch('/api/recommend', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ score, tier, tools, answers, projects, type: 'flashcards' })
      });
      const data = await res.json();
      const cards = JSON.parse(data.flashcards || '[]');
      const container = document.getElementById('flashcards');
      container.innerHTML = cards.map(c => `
        <div class="flashcard" onclick="this.classList.toggle('flipped')">
          <div class="question">Q: ${c.q}</div>
          <div class="answer">A: ${c.a}</div>
        </div>
      `).join('');
    }

    function copyFlashcards() {
      const cards = [...document.querySelectorAll('.flashcard')]
        .map(card => card.innerText).join('\n\n');
      navigator.clipboard.writeText(cards);
      alert('Quiz copied to clipboard!');
    }

    fetchRecommendations();
    fetchFlashcards();
  </script>
</body>
</html>

